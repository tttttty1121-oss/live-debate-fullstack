# ğŸš€ ç›´æ’­è¾©è®ºå°ç¨‹åºåç«¯æœåŠ¡

## ğŸ“Œ åŸºæœ¬ä¿¡æ¯

**é¡¹ç›®åç§°**: ç›´æ’­è¾©è®ºå°ç¨‹åºåç«¯æœåŠ¡ (Live Debate Backend)

**é¡¹ç›®ç±»å‹**: åç«¯APIæœåŠ¡ + WebSocketå®æ—¶é€šä¿¡

**æŠ€æœ¯æ ˆ**:
- **åç«¯æ¡†æ¶**: Node.js + Express.js
- **å®æ—¶é€šä¿¡**: WebSocket
- **Mockæ•°æ®**: å†…ç½®JavaScriptå¯¹è±¡
- **éƒ¨ç½²æ–¹å¼**: Docker + äº‘æœåŠ¡

**æ¼”ç¤ºåœ°å€**:
- ğŸš€ **åç«¯API**: [å¾…éƒ¨ç½²åæä¾›é“¾æ¥]
- ğŸ¨ **å‰ç«¯æ¼”ç¤º**: [å¾…éƒ¨ç½²åæä¾›é“¾æ¥]

---

## ğŸ§± æŠ€æœ¯æ ˆè¯´æ˜

### åç«¯æŠ€æœ¯æ ˆ
- **Node.js**: JavaScriptè¿è¡Œæ—¶ç¯å¢ƒ
- **Express.js**: Webåº”ç”¨æ¡†æ¶
- **WebSocket**: å®æ—¶åŒå‘é€šä¿¡
- **CORS**: è·¨åŸŸèµ„æºå…±äº«
- **UUID**: å”¯ä¸€æ ‡è¯†ç¬¦ç”Ÿæˆ

### Mockæ•°æ®æ–¹æ¡ˆ
- **æ•°æ®å­˜å‚¨**: å†…å­˜å­˜å‚¨ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ•°æ®åº“ï¼‰
- **æ•°æ®ç”Ÿæˆ**: å†…ç½®JavaScriptå¯¹è±¡å’Œéšæœºæ•°æ®
- **æ•°æ®æ›´æ–°**: å®šæ—¶åˆ·æ–°æ¨¡æ‹Ÿå®æ—¶æ•°æ®å˜åŒ–

### éƒ¨ç½²å¹³å°
- **å®¹å™¨åŒ–**: Docker
- **äº‘æœåŠ¡**: Railway / Render / Vercel
- **CI/CD**: GitHub Actions (å¯é€‰)

---

## ğŸ”— é¡¹ç›®ç»“æ„ä¸æ¥å£è¯´æ˜

### ç›®å½•ç»“æ„
```
backend-live-debate/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ mock-data.js          # Mockæ•°æ®ç”Ÿæˆå™¨
â”œâ”€â”€ routes/                   # APIè·¯ç”±ï¼ˆå¯æ‰©å±•ï¼‰
â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”œâ”€â”€ middleware/               # ä¸­é—´ä»¶
â”œâ”€â”€ server.js                 # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ test-api.js              # APIæµ‹è¯•è„šæœ¬
â”œâ”€â”€ integration-test.js      # é›†æˆæµ‹è¯•è„šæœ¬
â”œâ”€â”€ test-frontend.html       # å‰ç«¯é›†æˆæµ‹è¯•é¡µé¢
â”œâ”€â”€ package.json             # é¡¹ç›®é…ç½®
â”œâ”€â”€ Dockerfile               # Dockeré…ç½®
â”œâ”€â”€ railway.json            # Railwayéƒ¨ç½²é…ç½®
â”œâ”€â”€ vercel.json             # Verceléƒ¨ç½²é…ç½®
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

### ä¸»è¦APIæ¥å£

#### 1. æŠ•ç¥¨ç³»ç»Ÿæ¥å£
| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|------|
| è·å–ç¥¨æ•°ç»Ÿè®¡ | GET | `/api/v1/votes?stream_id={streamId}` | è¿”å›æŒ‡å®šç›´æ’­æµçš„æŠ•ç¥¨ç»Ÿè®¡ |
| ç”¨æˆ·æŠ•ç¥¨ | POST | `/api/v1/user-vote` | ç”¨æˆ·æäº¤æŠ•ç¥¨ï¼ˆæ”¯æŒå·¦æ–¹/å³æ–¹ç¥¨æ•°ï¼‰ |
| æŸ¥è¯¢ç”¨æˆ·æŠ•ç¥¨çŠ¶æ€ | GET | `/api/v1/user-votes?stream_id={}&user_id={}` | è·å–ç”¨æˆ·çš„æŠ•ç¥¨è®°å½• |

#### 2. è¾©é¢˜ç®¡ç†æ¥å£
| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|------|
| è·å–è¾©é¢˜ä¿¡æ¯ | GET | `/api/v1/debate-topic?stream_id={streamId}` | è¿”å›è¾©è®ºé¢˜ç›®å’Œç«‹åœºä¿¡æ¯ |

#### 3. è¯„è®ºç³»ç»Ÿæ¥å£
| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|------|
| æ·»åŠ è¯„è®º | POST | `/api/comment` | æ·»åŠ æ–°è¯„è®º |
| ç‚¹èµåŠŸèƒ½ | POST | `/api/like` | å¯¹å†…å®¹æˆ–è¯„è®ºç‚¹èµ |
| åˆ é™¤è¯„è®º | DELETE | `/api/comment/{commentId}` | åˆ é™¤æŒ‡å®šè¯„è®º |

#### 4. AIå†…å®¹æ¥å£
| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|------|
| è·å–AIè¯†åˆ«å†…å®¹ | GET | `/api/v1/ai-content?stream_id={streamId}` | è¿”å›AIåˆ†æçš„å†…å®¹ |

#### 5. ç›´æ’­æ§åˆ¶æ¥å£
| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|------|
| è·å–ç›´æ’­çŠ¶æ€ | GET | `/api/admin/live/status` | è¿”å›å½“å‰ç›´æ’­çŠ¶æ€ |
| è·å–æ•°æ®æ¦‚è§ˆ | GET | `/api/admin/dashboard` | è¿”å›ç³»ç»Ÿç»Ÿè®¡æ•°æ® |
| æ§åˆ¶ç›´æ’­ | POST | `/api/live/control` | å¼€å§‹æˆ–åœæ­¢ç›´æ’­ |
| è·å–ç›´æ’­æµåˆ—è¡¨ | GET | `/api/v1/admin/streams` | è¿”å›æ‰€æœ‰ç›´æ’­æµä¿¡æ¯ |
| è·å–æŠ•ç¥¨ç»Ÿè®¡ | GET | `/api/v1/admin/votes/statistics` | è¿”å›è¯¦ç»†æŠ•ç¥¨ç»Ÿè®¡ |

#### 6. å…¶ä»–å·¥å…·æ¥å£
| åŠŸèƒ½ | æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|------|
| å¥åº·æ£€æŸ¥ | GET | `/health` | æœåŠ¡å¥åº·çŠ¶æ€æ£€æŸ¥ |
| è·å–RTMPåœ°å€ | GET | `/api/admin/rtmp/urls` | è·å–ç›´æ’­æ¨æµåœ°å€ |

### APIå“åº”æ ¼å¼ç¤ºä¾‹

#### æˆåŠŸå“åº”
```json
{
  "success": true,
  "data": {
    "id": "debate-1",
    "title": "è¾©è®ºé¢˜ç›®",
    "leftSide": "æ­£æ–¹",
    "rightSide": "åæ–¹"
  }
}
```

#### é”™è¯¯å“åº”
```json
{
  "success": false,
  "message": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

#### ç”¨æˆ·æŠ•ç¥¨è¯·æ±‚æ ¼å¼
```json
{
  "request": {
    "leftVotes": 50,
    "rightVotes": 50,
    "streamId": "stream-1",
    "userId": "user-123"
  }
}
```

---

## ğŸ§  é¡¹ç›®å¼€å‘è¿‡ç¨‹ç¬”è®°

### å®ç°æ€è·¯
1. **éœ€æ±‚åˆ†æ**: é€šè¿‡åˆ†æå‰ç«¯APIè°ƒç”¨ï¼Œç¡®å®šéœ€è¦å®ç°çš„æ¥å£
2. **æ•°æ®å»ºæ¨¡**: è®¾è®¡Mockæ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬è¾©é¢˜ã€æŠ•ç¥¨ã€è¯„è®ºã€ç›´æ’­æµç­‰
3. **APIè®¾è®¡**: æŒ‰ç…§RESTfulåŸåˆ™è®¾è®¡æ¥å£è·¯å¾„å’ŒHTTPæ–¹æ³•
4. **å®æ—¶é€šä¿¡**: é›†æˆWebSocketæ”¯æŒå®æ—¶æŠ•ç¥¨æ›´æ–°
5. **é”™è¯¯å¤„ç†**: æ·»åŠ å®Œå–„çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç è¿”å›
6. **æµ‹è¯•éªŒè¯**: åˆ›å»ºè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬éªŒè¯æ¥å£åŠŸèƒ½

### é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. Faker.jså…¼å®¹æ€§é—®é¢˜
**é—®é¢˜**: æ–°ç‰ˆæœ¬faker.js APIå˜æ›´å¯¼è‡´æ— æ³•ä½¿ç”¨
**è§£å†³æ–¹æ¡ˆ**: ç§»é™¤fakerä¾èµ–ï¼Œä½¿ç”¨å†…ç½®Math.random()å’Œå›ºå®šæ•°æ®ç”Ÿæˆ

#### 2. UUIDæ¨¡å—ESæ¨¡å—é—®é¢˜
**é—®é¢˜**: uuidåŒ…ä»v9å¼€å§‹æ”¹ä¸ºESæ¨¡å—ï¼Œä¸å…¼å®¹CommonJS
**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨Node.jså†…ç½®çš„crypto.randomUUID()æ›¿ä»£

#### 3. å‰ç«¯é›†æˆæµ‹è¯•
**é—®é¢˜**: uni-appå‰ç«¯å¯åŠ¨å¤æ‚ï¼Œéš¾ä»¥ç›´æ¥æµ‹è¯•
**è§£å†³æ–¹æ¡ˆ**: åˆ›å»ºç‹¬ç«‹çš„HTMLæµ‹è¯•é¡µé¢éªŒè¯APIåŠŸèƒ½

#### 4. è·¨åŸŸé…ç½®
**é—®é¢˜**: å‰ç«¯å’Œåç«¯ç«¯å£ä¸åŒå¯¼è‡´è·¨åŸŸé—®é¢˜
**è§£å†³æ–¹æ¡ˆ**: é…ç½®CORSä¸­é—´ä»¶å…è®¸æ‰€æœ‰æºè®¿é—®

### æœ¬åœ°è”è°ƒç»éªŒ
- ä½¿ç”¨Postman/Insomniaæµ‹è¯•APIæ¥å£
- åˆ›å»ºä¸“é—¨çš„æµ‹è¯•è„šæœ¬éªŒè¯åŠŸèƒ½
- é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·ç›‘æ§ç½‘ç»œè¯·æ±‚
- ä½¿ç”¨WebSocketæµ‹è¯•å®æ—¶é€šä¿¡åŠŸèƒ½

### éƒ¨ç½²è¸©å‘è®°å½•
- **ç«¯å£é…ç½®**: ä¸åŒäº‘å¹³å°ä½¿ç”¨ä¸åŒçš„ç¯å¢ƒå˜é‡è·å–ç«¯å£
- **ä¾èµ–å®‰è£…**: ç”Ÿäº§ç¯å¢ƒéœ€è¦ç²¾ç®€ä¾èµ–åŒ…
- **é™æ€æ–‡ä»¶**: æµ‹è¯•é¡µé¢éœ€è¦æ­£ç¡®é…ç½®é™æ€æ–‡ä»¶æœåŠ¡
- **WebSocket**: æŸäº›å¹³å°å¯èƒ½ä¸æ”¯æŒWebSocketï¼Œéœ€è¦å¤‡é€‰æ–¹æ¡ˆ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘ç¯å¢ƒ

#### 1. ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 7.0.0

#### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

#### 3. å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘æ¨¡å¼ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

#### 4. éªŒè¯æœåŠ¡
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# APIæµ‹è¯•
node test-api.js

# é›†æˆæµ‹è¯•
node integration-test.js
```

#### 5. è®¿é—®æµ‹è¯•é¡µé¢
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000/test-frontend.html`

### Dockeréƒ¨ç½²

#### 1. æ„å»ºé•œåƒ
```bash
docker build -t live-debate-backend .
```

#### 2. è¿è¡Œå®¹å™¨
```bash
docker run -p 8000:8000 live-debate-backend
```

### äº‘å¹³å°éƒ¨ç½²

#### Railwayéƒ¨ç½²
1. è¿æ¥GitHubä»“åº“
2. è‡ªåŠ¨æ£€æµ‹å¹¶éƒ¨ç½²
3. è·å–åˆ†é…çš„åŸŸå

#### Verceléƒ¨ç½²
1. å¯¼å…¥GitHubä»“åº“
2. é…ç½®vercel.json
3. éƒ¨ç½²å‡½æ•°æœåŠ¡

#### Renderéƒ¨ç½²
1. åˆ›å»ºWeb Service
2. è¿æ¥GitHubä»“åº“
3. é…ç½®æ„å»ºå‘½ä»¤ï¼š`npm install && npm start`

---

## ğŸ“Š æ•°æ®æ¨¡å‹è¯´æ˜

### ç›´æ’­æµæ•°æ® (Streams)
```javascript
{
  id: "stream-1",
  name: "è¾©è®ºèµ›åœºA",
  description: "ç²¾å½©è¾©è®ºç°åœº",
  status: "active", // active | inactive
  viewers: 1250,
  streamUrl: "rtmp://...",
  createdAt: "2024-01-01T00:00:00Z"
}
```

### è¾©é¢˜æ•°æ® (Debate Topics)
```javascript
{
  id: "debate-1",
  title: "è¾©è®ºé¢˜ç›®",
  description: "è¯¦ç»†æè¿°",
  leftSide: "æ­£æ–¹ç«‹åœº",
  rightSide: "åæ–¹ç«‹åœº",
  streamId: "stream-1"
}
```

### æŠ•ç¥¨æ•°æ® (Votes)
```javascript
{
  streamId: "stream-1",
  leftVotes: 245,
  rightVotes: 198,
  totalVotes: 443,
  lastUpdated: "2024-01-01T12:00:00Z"
}
```

---

## ğŸ”§ å¯æ‰©å±•æ€§æ€è€ƒ

### æ•°æ®åº“é›†æˆ
- å½“å‰ä½¿ç”¨å†…å­˜å­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ï¼š
  - **MongoDB**: æ–‡æ¡£å‹æ•°æ®åº“ï¼Œé€‚åˆJSONæ•°æ®
  - **PostgreSQL**: å…³ç³»å‹æ•°æ®åº“ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢
  - **Redis**: ç¼“å­˜å±‚ï¼Œæé«˜è¯»å–æ€§èƒ½

### èº«ä»½è®¤è¯
- æ·»åŠ JWT tokenè®¤è¯
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•æ¥å£
- æƒé™ç®¡ç†ç³»ç»Ÿ

### å®æ—¶é€šä¿¡ä¼˜åŒ–
- ä½¿ç”¨Socket.IOæ›¿ä»£åŸç”ŸWebSocket
- æ·»åŠ æˆ¿é—´ç®¡ç†
- æ¶ˆæ¯å¹¿æ’­ä¼˜åŒ–

### ç›‘æ§å’Œæ—¥å¿—
- æ·»åŠ è¯·æ±‚æ—¥å¿—
- æ€§èƒ½ç›‘æ§
- é”™è¯¯è¿½è¸ª

### APIç‰ˆæœ¬ç®¡ç†
- æ·»åŠ APIç‰ˆæœ¬æ§åˆ¶
- å‘åå…¼å®¹æ€§ä¿è¯
- æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ

---

## ğŸ§ ä¸ªäººä»‹ç»

**æŠ€æœ¯èƒŒæ™¯**:
- ä¸»è¯­è¨€ï¼šJavaScript/Node.js
- æ“…é•¿æ–¹å‘ï¼šåç«¯APIå¼€å‘ã€å®æ—¶é€šä¿¡ç³»ç»Ÿ
- å­¦ä¹ ç›®æ ‡ï¼šå…¨æ ˆå¼€å‘ã€ç³»ç»Ÿæ¶æ„è®¾è®¡

**é¡¹ç›®ç»éªŒ**:
- ç‹¬ç«‹å®Œæˆç›´æ’­è¾©è®ºå°ç¨‹åºåç«¯æœåŠ¡å¼€å‘
- å®ç°å®Œæ•´çš„Mock APIæ¥å£å’Œå®æ—¶é€šä¿¡
- æŒæ¡äº‘æœåŠ¡éƒ¨ç½²å’Œå®¹å™¨åŒ–æŠ€æœ¯

**æŠ€æœ¯äº®ç‚¹**:
- ç†Ÿç»ƒä½¿ç”¨Express.jsæ¡†æ¶
- æŒæ¡WebSocketå®æ—¶é€šä¿¡
- ç†Ÿæ‚‰RESTful APIè®¾è®¡åŸåˆ™
- å…·å¤‡äº‘å¹³å°éƒ¨ç½²ç»éªŒ

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-07)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®ç°æ‰€æœ‰æ ¸å¿ƒAPIæ¥å£
- âœ… æ”¯æŒWebSocketå®æ—¶é€šä¿¡
- âœ… å®Œæ•´çš„Mockæ•°æ®ç³»ç»Ÿ
- âœ… Dockerå’Œäº‘éƒ¨ç½²é…ç½®

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§LICENSEæ–‡ä»¶

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- ğŸ“§ Email: backend@live-debate.com
- ğŸ› Issues: [GitHub Issues](https://github.com/your-repo/issues)

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼**
